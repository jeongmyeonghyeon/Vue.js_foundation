**[뷰 인스턴스]**

**뷰 인스턴스의 정의와 속성**

뷰로 화면을 개발하기 위해 필수적으로 생성해야 하는 기본 단위.

```
new Vue() 
```
  
뷰 라이브러리를 로딩하고 나면 접근할 수 있음.  
사용이유: 뷰로 개발할 때 필요한 기능들을 **생성자**에 미리 정의해 놓고 사용자가 그 기능을 재정의하여 편리하게 사용하도록 하기 위해서.

- 생성자: 객체를 새로 생성할 때 자주 사용하는 옵션과 기능들을 **미리 특정 객체에 저장**해 놓고, 새로 객체를 생성할 때 기존에 포함된 기능과 더불어 기존 기능을 **쉽게 확장**하여 사용하는 기법. 객체 지향 프로그래밍에서 사용하는 객체 정의 방식... 으로 미리 정의된 속성과 메서드를 재활용하기 위해 사용.

**뷰 인스턴스 옵션 속성**

data, el, template, ...

- data: 미리 정의되어 있는 속성
- el: 뷰로 만든 화면이 그려지는 시작점. 뷰 인스턴스로 화면을 렌더링할 때 화면이 그려질 위치의 돔 요소를 지정. (CSS 선택자 규칙과 동일)

이 외...

- template
- methods: 화면 로직 제어와 관계된 메서드를 정의하는 속성. *마우스 클릭 이벤트 처리와 같이 화면의 전반적인 이벤트와 화면 동작과 관련된 로직을 추가할 수 있다.*
- created: 뷰 인스턴스가 생성되자마 실행할 로직을 정의할 수 있는 속성.

**뷰 인스턴스의 유효 범위**

뷰 인스턴스를 생성하면 *HTML의 특정 범위 안에서만 옵션 속성들이 적용되어* 나타남. 이를 인스턴스 유효 범위라고 함.  
지역 컴포넌트/전역 컴포넌트 차이점을 위해 알아야 하는 개념. el 속성과 밀접한 관계.

*new Vue(), 인스턴스가 화면에 적용되는 과정*

뷰 라이브러리 파일 로딩 > 인스턴스 객체 생성(옵션 속성 포함) > 특정 화면 요소에 인스턴스를 붙임(부착, mount) > 인스턴스 내용이 화면 요소로 변환(data: {message: ...} 가 {{ message }} 에서 치환) > 변환된 화면 오소를 사용자가 최종 확인


**뷰 인스턴스 라이프 사이클**

new Vue() (인스턴스 생성) > 이벤트 및 라이프 사이클 초기화 > beforeCreate > 화면에 반응성 주입 > created > el, template 속성 확인 > beforeMount > $el 생성 후 el 속성 값을 대입 > mounted > 인스턴스를 화면에 부착 > (데이터가 변경되는 경우에만 거침) > 인스턴스의 데이터 변경 > beforeUpdate > 화면 재 렌더링 및 데이터 갱신 > updated > 인스턴스 내용 갱신 > 인스턴스 접근 가능 > beforeDestroy > 컴포넌트, 인스턴스, 디렉티브 등 모두 해제 > destroyed > 인스턴스 소멸

크게 생성>부착>갱신>소멸, create>mount>update>destroy

- beforeCreate
    - 인스턴스가 생성되고 나서 가장 처음으로 실행되는 라이프 사이클 단계.
    - data 속성, methods 속성이 아직 인스턴스에 정의되어 있지 않고, 돔과 같은 화면 요소에도 접근할 수 없다.
    
- created
    - data 속성과 methods 속성이 정의되었기 때문에 this.data 또는 this.fetchData()와 같은 로직들을 이용하여 data 속성과 methods 속성에 정의된 값에 접근하여 로직을 실행할 수 있다.
    - 다만, 아직 인스턴스가 화면 요소에 부착되기 전이기 때문에, template 속성에 정의된 돔 요소로 접근할 수 없다.
    
- beforeMount
    - created 단계 이후 template 속성에 지정한 마크업 속성을 render() 함수로 변환한 후 el 속성에 지정한 화면 요소(DOM)에 인스턴스를 부착하기 전에 호출되는 단계.
    - render() 함수가 호출되기 직전의 로직을 추가하기 좋다.
    - render(): 자바스크립트로 화면의 DOM을 그리는 함수
    
- mounted
    - el 속성에서 지정한 화면 요소에 인스턴스가 부착되고 나면 호출되는 단계.
    - template 속성에 정의한 화면 요소(DOM)에 접근할 수 있어 화면 요소를 제어하는 로직을 수행하기 좋은 단계.
    - 다만, DOM에 인스턴스가 부착되자마자 바로 호출되기 때문에 하위 컴포넌트나 외부 라이브러리에 의해 추가된 화면 요소들이 최종 HTML 코드로 변환되는 시점과 다를 수 있음.
        - 변환되는 시점이 다를 경우 $nextTick() API를 활용하여 HTML 코드로 최종 파싱(변환)될 때까지 기다린 후 돔 제어 로직을 추가.
        
- beforeUpdate
    - el 속성에서 지정한 화면 요소에 인스턴스가 부착되고 나면 인스턴스에 정의한 속성들이 화면에 치환됨.
    - 치환된 값은 뷰의 반응성(Reactivity)을 제공하기 위해 $watch 속성으로 감시. 이를 데이터 관찰 이라고 함.
    - 또한 beforeUpdate 는 관찰하고 있는 데이터가 변경되면 가상 돔으로 화면을 다시 그리기 전에 호출되는 단계.
    - 변경 예정인 새 데이터에 접근할 수 있어 변경 예정 데이터의 값과 관련된 로직을 미리 넣을 수 있다.
    - 만약 여기에 값을 변경하는 로직을 넣더라도 화면이 다시 그려지지는 않는다.
    
- updated
    - 데이터가 변경되고 나서 가상 돔으로 다시 화면을 그리고나면 실행되는 단계.
    - 데이터 변경으로 인한 화면 요소 변경까지 완료된 시점이므로, 데이터 변경 후 화면 요소 제어와 관련된 로직을 추가하기 좋은 단계.
    - 이 단계에서 데이터 값을 변경하면 무한 루프에 빠질 수 있기 때문에 값을 변경하려면 computed, watch와 같은 속성을 사용.
    - 따라서, 데이터 값을 갱신하는 로직은 가급적이면 beforeUpdate, updated에서는 변경 데이터의 화면 요소(DOM)와 관련된 로직을 추가하는 것이 좋다.
        - mounted 단계와 마찬가지로 하위 컴포넌트의 화면 요소와 외부 라이브러리에 의해 주입된 요소의 최종 변환 시점이 다를 수 있음. $nextTick()을 사용하여 변환이 완료될 때까지 기다렸다가 로직을 추가.
        
- beforeDestroy
    - 뷰 인스턴스가 파괴되기 직전에 호출되는 단계.
    - 이 단계에서는 아직 인스턴스에 접근할 수 있음.
    - 따라서 뷰 인스턴스의 데이터를 삭제하기 좋은 단계.
    
- destroyed
    - 뷰 인스턴스가 파괴되고 나서 호출되는 단계.
    - 뷰 인스턴스에 정의한 모든 속성이 제거되고 하위에 선언한 인스턴스들 또한 모두 파괴.